

####0.我们在192.168.35.158 服务器上操作

####1.拉取官方镜像
>docker pull registry:2.8.0

####2.查看端口占用
>  netstat -anp |grep 5000  
私服默认5000端口，如果已占用，私服可以换个端口

####3.编写启动命令
将数据卷,挂载到主机的 /data/zhfw-software/zhfw-image 下

>docker run -d \
-v /data/zhfw-software/zhfw-image:/var/lib/registry \
-p 5000:5000 \
--restart=always \
--name registry \
registry:2.8.0

####4.使用命令查看是否启动
>docker ps 

####5.使用浏览器查看是否启动
>http://192.168.35.158:5000/v2/_catalog


####6.推送方式1
1.将硬盘上的image改名  
 >命令:	docker tag 镜像名:tag   私服url:私服port/镜像名:tag  
 比如:	docker tag jdk_8:v1    192.168.35.158:5000/jdk_8:v1
 
2.将硬盘上的image推送到私服
 >命令:	docker push 私服url:私服port/镜像名:tag  
 比如:	docker push 192.168.35.158:5000/jdk_8:v1

	2.1 异常处理
	如果返回:
	 docker push 192.168.35.158:5000/registry:2.8.0
	The push refers to repository [192.168.35.158:5000/registry]
	Get https://192.168.35.158:5000/v2/: http: server gave HTTP response to HTTPS client

	这是因为我们启动的registry服务不是安全可信赖的
	修改docker的配置文件/etc/docker/daemon.json，
	(可以删除阿里云的镜像地址)
	注意,千万别写错了,不然无法启动docker
	{
	"registry-mirrors": [ "https://xxxx.mirror.aliyuncs.com"],
	"insecure-registries": ["192.168.35.158:5000"]
	}

####7. 查看
>浏览器查看  
http://192.168.35.158:5000/v2/_catalog   
>
>服务器路径查看  
/data/zhfw-software/zhfw-image/docker/registry/v2/repositories

####8.ui管理界面
>这个私服，并未提供ui管理页面

####9.权限
>https://zhuanlan.zhihu.com/p/37408440







